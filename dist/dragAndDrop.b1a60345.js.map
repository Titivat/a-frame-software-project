{"version":3,"sources":["action/dragAndDrop.js"],"names":["AFRAME","registerSystem","init","el","setAttribute","rayOrigin","registerComponent","addEventListener","e","is","sceneEl","camera","enabled","addState","removeState","dependencies","range","dist","detail","object3D","position","clone","sub","length","direction","THREE","Vector3","target","document","deltaY","updateDirection","copy","getAttribute","updateTarget","add","multiplyScalar","tick","schema","color","default","data","defaultColor"],"mappings":"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","file":"dragAndDrop.b1a60345.js","sourceRoot":"..","sourcesContent":["// if (window.AFRAME == null) {\r\n// \tconsole.log(\"I am not AFRAME\");\r\n// \tconsole.error(\"aframe not found, please import it before this component.\");\r\n// }\r\n\r\nAFRAME.registerSystem(\"track-cursor\", {\r\n\tinit: function () {\r\n\t\tthis.el.setAttribute(\"cursor\", { rayOrigin: \"mouse\" });\r\n\t},\r\n});\r\n\r\nAFRAME.registerComponent(\"track-cursor\", {\r\n\tinit: function () {\r\n\t\tthis.el.addEventListener(\"mousedown\", (e) => {\r\n\t\t\tif (this.el.is(\"cursor-hovered\")) {\r\n\t\t\t\tthis.el.sceneEl.camera.el.setAttribute(\"look-controls\", {\r\n\t\t\t\t\tenabled: false,\r\n\t\t\t\t});\r\n\t\t\t\tthis.el.addState(\"dragging\");\r\n\t\t\t}\r\n\t\t});\r\n\t\tthis.el.addEventListener(\"click\", (e) => {\r\n\t\t\tif (this.el.is(\"dragging\")) {\r\n\t\t\t\tthis.el.sceneEl.camera.el.setAttribute(\"look-controls\", {\r\n\t\t\t\t\tenabled: true,\r\n\t\t\t\t});\r\n\t\t\t\tthis.el.removeState(\"dragging\");\r\n\t\t\t}\r\n\t\t});\r\n\t},\r\n});\r\n\r\nAFRAME.registerComponent(\"dragndrop\", {\r\n\tdependencies: [\"track-cursor\"],\r\n\tinit: function () {\r\n\t\tthis.range = 0;\r\n\t\tthis.dist = 0;\r\n\r\n\t\tthis.el.addEventListener(\"stateadded\", (e) => {\r\n\t\t\tif (e.detail == \"dragging\") {\r\n\t\t\t\tthis.range = 0;\r\n\t\t\t\tthis.dist = this.el.object3D.position\r\n\t\t\t\t\t.clone()\r\n\t\t\t\t\t.sub(this.el.sceneEl.camera.el.object3D.position)\r\n\t\t\t\t\t.length();\r\n\t\t\t}\r\n\t\t});\r\n\r\n\t\tthis.direction = new AFRAME.THREE.Vector3();\r\n\t\tthis.target = new AFRAME.THREE.Vector3();\r\n\t\tdocument.addEventListener(\"wheel\", (e) => {\r\n\t\t\tif (e.deltaY < 0) {\r\n\t\t\t\tthis.range += 0.1;\r\n\t\t\t} else {\r\n\t\t\t\tthis.range -= 0.1;\r\n\t\t\t}\r\n\t\t});\r\n\t},\r\n\tupdateDirection: function () {\r\n\t\tthis.direction.copy(this.el.sceneEl.getAttribute(\"raycaster\").direction);\r\n\t},\r\n\tupdateTarget: function () {\r\n\t\tlet camera = this.el.sceneEl.camera.el;\r\n\t\tthis.target.copy(\r\n\t\t\tcamera.object3D.position\r\n\t\t\t\t.clone()\r\n\t\t\t\t.add(this.direction.clone().multiplyScalar(this.dist + this.range))\r\n\t\t);\r\n\t},\r\n\ttick: function () {\r\n\t\tif (this.el.is(\"dragging\")) {\r\n\t\t\tthis.updateDirection();\r\n\t\t\tthis.updateTarget();\r\n\t\t\tthis.el.object3D.position.copy(this.target);\r\n\t\t}\r\n\t},\r\n});\r\n\r\nAFRAME.registerComponent(\"change-color-on-hover\", {\r\n    schema: {\r\n        color: { default: \"red\" },\r\n    },\r\n\r\n    init: function () {\r\n        var data = this.data;\r\n        var el = this.el; // <a-box>\r\n        var defaultColor = el.getAttribute(\"material\").color;\r\n\r\n        el.addEventListener(\"mouseenter\", function () {\r\n            el.setAttribute(\"color\", data.color);\r\n        });\r\n\r\n        el.addEventListener(\"mouseleave\", function () {\r\n            el.setAttribute(\"color\", defaultColor);\r\n        });\r\n    },\r\n});"]}