{"version":3,"sources":["action/dragAndDrop.js"],"names":["API_PATH_NAME","postData","url","data","fetch","method","mode","cache","credentials","headers","redirect","referrerPolicy","body","JSON","stringify","response","json","AFRAME","registerSystem","init","el","setAttribute","rayOrigin","registerComponent","addEventListener","e","is","sceneEl","camera","enabled","addState","console","log","ws","send","removeState","dependencies","range","dist","detail","object3D","position","clone","sub","length","direction","THREE","Vector3","target","document","deltaY","updateDirection","copy","getAttribute","updateTarget","add","multiplyScalar","tick","schema","color","default","defaultColor"],"mappings":"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","file":"dragAndDrop.b1a60345.js","sourceRoot":"..","sourcesContent":["// if (window.AFRAME == null) {\r\n// \tconsole.log(\"I am not AFRAME\");\r\n// \tconsole.error(\"aframe not found, please import it before this component.\");\r\n// }\r\nconst API_PATH_NAME = \"https://reqres.in\";\r\nasync function postData(url = \"\", data = {}) {\r\n\t// Default options are marked with *\r\n\tconst response = await fetch(`${API_PATH_NAME}${url}`, {\r\n\t\tmethod: \"POST\", // *GET, POST, PUT, DELETE, etc.\r\n\t\tmode: \"cors\", // no-cors, *cors, same-origin\r\n\t\tcache: \"no-cache\", // *default, no-cache, reload, force-cache, only-if-cached\r\n\t\tcredentials: \"same-origin\", // include, *same-origin, omit\r\n\t\theaders: {\r\n\t\t\t\"Content-Type\": \"application/json\",\r\n\t\t\t// 'Content-Type': 'application/x-www-form-urlencoded',\r\n\t\t},\r\n\t\tredirect: \"follow\", // manual, *follow, error\r\n\t\treferrerPolicy: \"no-referrer\", // no-referrer, *no-referrer-when-downgrade, origin, origin-when-cross-origin, same-origin, strict-origin, strict-origin-when-cross-origin, unsafe-url\r\n\t\tbody: JSON.stringify(data), // body data type must match \"Content-Type\" header\r\n\t});\r\n\treturn response.json(); // parses JSON response into native JavaScript objects\r\n}\r\n\r\nAFRAME.registerSystem(\"track-cursor\", {\r\n\tinit: function () {\r\n\t\tthis.el.setAttribute(\"cursor\", { rayOrigin: \"mouse\" });\r\n\t},\r\n});\r\n\r\nAFRAME.registerComponent(\"track-cursor\", {\r\n\tinit: function () {\r\n\t\tthis.el.addEventListener(\"mousedown\", (e) => {\r\n\t\t\tif (this.el.is(\"cursor-hovered\")) {\r\n\t\t\t\tthis.el.sceneEl.camera.el.setAttribute(\"look-controls\", {\r\n\t\t\t\t\tenabled: false,\r\n\t\t\t\t});\r\n\t\t\t\tthis.el.addState(\"dragging\");\r\n\t\t\t}\r\n\t\t});\r\n\t\tthis.el.addEventListener(\"click\", (e) => {\r\n\t\t\tconsole.log(\"Stop dragging\");\r\n\t\t\tws.send(\"I am from click\");\r\n\t\t\t// console.log(this.el.object3D.position);\r\n\t\t\t// const data = {\r\n\t\t\t// \tname: \"morpheus\",\r\n\t\t\t// \tjob: \"leader\",\r\n\t\t\t// };\r\n\t\t\t// const response = await postData(\"/api/users\", data);\r\n\t\t\t// console.log(response);\r\n\t\t\tif (this.el.is(\"dragging\")) {\r\n\t\t\t\t// console.log(\"dragging\");\r\n\t\t\t\t// const response = await postData(\"/api/users\", data);\r\n\t\t\t\tthis.el.sceneEl.camera.el.setAttribute(\"look-controls\", {\r\n\t\t\t\t\tenabled: true,\r\n\t\t\t\t});\r\n\t\t\t\tthis.el.removeState(\"dragging\");\r\n\t\t\t} else {\r\n\t\t\t\tconsole.log(\"Not dragging\");\r\n\t\t\t}\r\n\t\t});\r\n\t},\r\n});\r\n\r\nAFRAME.registerComponent(\"dragndrop\", {\r\n\tdependencies: [\"track-cursor\"],\r\n\tinit: function () {\r\n\t\tthis.range = 0;\r\n\t\tthis.dist = 0;\r\n\r\n\t\tthis.el.addEventListener(\"stateadded\", (e) => {\r\n\t\t\tif (e.detail == \"dragging\") {\r\n\t\t\t\tthis.range = 0;\r\n\t\t\t\tthis.dist = this.el.object3D.position\r\n\t\t\t\t\t.clone()\r\n\t\t\t\t\t.sub(this.el.sceneEl.camera.el.object3D.position)\r\n\t\t\t\t\t.length();\r\n\t\t\t}\r\n\t\t});\r\n\r\n\t\tthis.direction = new AFRAME.THREE.Vector3();\r\n\t\tthis.target = new AFRAME.THREE.Vector3();\r\n\t\tdocument.addEventListener(\"wheel\", (e) => {\r\n\t\t\tif (e.deltaY < 0) {\r\n\t\t\t\tthis.range += 0.1;\r\n\t\t\t} else {\r\n\t\t\t\tthis.range -= 0.1;\r\n\t\t\t}\r\n\t\t});\r\n\t},\r\n\tupdateDirection: function () {\r\n\t\tthis.direction.copy(this.el.sceneEl.getAttribute(\"raycaster\").direction);\r\n\t},\r\n\tupdateTarget: function () {\r\n\t\tlet camera = this.el.sceneEl.camera.el;\r\n\t\tthis.target.copy(\r\n\t\t\tcamera.object3D.position\r\n\t\t\t\t.clone()\r\n\t\t\t\t.add(this.direction.clone().multiplyScalar(this.dist + this.range))\r\n\t\t);\r\n\t},\r\n\ttick: function () {\r\n\t\tif (this.el.is(\"dragging\")) {\r\n\t\t\tthis.updateDirection();\r\n\t\t\tthis.updateTarget();\r\n\t\t\tthis.el.object3D.position.copy(this.target);\r\n\t\t}\r\n\t},\r\n});\r\n\r\nAFRAME.registerComponent(\"change-color-on-hover\", {\r\n\tschema: {\r\n\t\tcolor: { default: \"red\" },\r\n\t},\r\n\r\n\tinit: function () {\r\n\t\tvar data = this.data;\r\n\t\tvar el = this.el; // <a-box>\r\n\t\tvar defaultColor = el.getAttribute(\"material\").color;\r\n\r\n\t\tel.addEventListener(\"mouseenter\", function () {\r\n\t\t\tel.setAttribute(\"color\", data.color);\r\n\t\t});\r\n\r\n\t\tel.addEventListener(\"mouseleave\", function () {\r\n\t\t\tel.setAttribute(\"color\", defaultColor);\r\n\t\t});\r\n\t},\r\n});\r\n"]}